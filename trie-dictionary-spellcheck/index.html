<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preload" href="/blog/component---src-layouts-index-js-29cb5c44085daafa2b8e.js" as="script"/><link rel="preload" href="/blog/component---src-templates-blog-post-js-89bb5a4bad2639e9770d.js" as="script"/><link rel="preload" href="/blog/path---trie-dictionary-spellcheck-f4883cfb425e8292b0de.js" as="script"/><link rel="preload" href="/blog/app-a58e68831cb2c2feb1e0.js" as="script"/><link rel="preload" href="/blog/commons-2c1f772de09748d79929.js" as="script"/><link rel="manifest" href="/blog/manifest.json"/><meta name="theme-color" content="white"/><title data-react-helmet="true">Daemons | Investigating tries - Writing a spell-checking algorithm</title><meta data-react-helmet="true" name="description" content="This article walks through writing a spell-checking algorithm, making use of a neat data structure called a  trie , which is particularly…"/><link rel="icon" type="image/png" sizes="1024x1024" href="/blog/static/logo.9d37eac5.png"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.4 'Alegreya',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Alegreya',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.75);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.775);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.8);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.9);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.9);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.9);font-family:'Alegreya Sans',sans-serif;font-weight:500;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}ul{margin-left:1.4rem;margin-right:0;margin-top:0.7rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:0.85rem;line-height:1.22;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.05rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;font-size:1rem;line-height:1.4rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}blockquote{margin-left:0;margin-right:1.4rem;margin-top:0;padding-bottom:0;padding-left:0.9625rem;padding-right:0;padding-top:0;margin-bottom:1.05rem;color:hsla(0,0%,0%,0.65);font-style:italic;border-left:0.4375rem solid hsla(0,0%,0%,0.5);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.05rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.05rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.05rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}li > ul{margin-left:1.4rem;margin-bottom:calc(1.05rem / 2);margin-top:calc(1.05rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:0.7rem;}code{font-size:0.85rem;line-height:1.4rem;}kbd{font-size:0.85rem;line-height:1.4rem;}samp{font-size:0.85rem;line-height:1.4rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.93333rem;padding-right:0.93333rem;padding-top:0.7rem;padding-bottom:calc(0.7rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}tt,code{background-color:hsla(0,0%,0%,0.04);border-radius:3px;font-family:"SFMono-Regular", Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Menlo,Courier,monospace;padding:0;padding-top:0.2em;padding-bottom:0.2em;font-size:85%;}pre code{background:none;line-height:1.42;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}h1,h2,h3,h4,h5,h6{line-height:1;}h1,h2,h3,h4{line-height:1;margin-top:1.4rem;margin-bottom:0.7rem;}h4,h5,h6{text-transformation:uppercase;}a{color:hsl(230,55%,58%);text-decoration:none;}a:hover,a:active{box-shadow:0 1px 0 0 currentColor;}blockquote > :last-child{margin-bottom:0;}@media only screen and (max-width:480px){html{font-size:112.5%;}blockquote{border-left:0.2625rem solid hsla(0,0%,0%,0.5);margin-left:-1.05rem;margin-right:0;padding-left:0.7875rem;}}blockquote > h1, blockquote > h2, blockquote > h3, blockquote > h4{margin-top:0;}p code{font-size:75%;}</style><style id="gatsby-inlined-css">@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:400;src:local("Alegreya Regular "),local("Alegreya-Regular"),url(/blog/static/alegreya-latin-400.24fbcabd.woff2) format("woff2"),url(/blog/static/alegreya-latin-400.508293b9.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:400;src:local("Alegreya Regular italic"),local("Alegreya-Regularitalic"),url(/blog/static/alegreya-latin-400italic.c8a1e4ae.woff2) format("woff2"),url(/blog/static/alegreya-latin-400italic.9e7a0928.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:700;src:local("Alegreya Bold "),local("Alegreya-Bold"),url(/blog/static/alegreya-latin-700.3ec3004b.woff2) format("woff2"),url(/blog/static/alegreya-latin-700.3f647c3d.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:700;src:local("Alegreya Bold italic"),local("Alegreya-Bolditalic"),url(/blog/static/alegreya-latin-700italic.23a153ec.woff2) format("woff2"),url(/blog/static/alegreya-latin-700italic.b2e3fada.woff) format("woff")}@font-face{font-family:Alegreya;font-style:normal;font-display:swap;font-weight:900;src:local("Alegreya Black "),local("Alegreya-Black"),url(/blog/static/alegreya-latin-900.46c45684.woff2) format("woff2"),url(/blog/static/alegreya-latin-900.b352c175.woff) format("woff")}@font-face{font-family:Alegreya;font-style:italic;font-display:swap;font-weight:900;src:local("Alegreya Black italic"),local("Alegreya-Blackitalic"),url(/blog/static/alegreya-latin-900italic.d2e82e8b.woff2) format("woff2"),url(/blog/static/alegreya-latin-900italic.c4c8cf1a.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:100;src:local("Alegreya Sans Thin "),local("Alegreya Sans-Thin"),url(/blog/static/alegreya-sans-latin-100.45a8e96e.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-100.d44cabed.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:100;src:local("Alegreya Sans Thin italic"),local("Alegreya Sans-Thinitalic"),url(/blog/static/alegreya-sans-latin-100italic.5142b88a.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-100italic.f7cd3496.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Alegreya Sans Light "),local("Alegreya Sans-Light"),url(/blog/static/alegreya-sans-latin-300.f3321ccf.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-300.d367a30e.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Alegreya Sans Light italic"),local("Alegreya Sans-Lightitalic"),url(/blog/static/alegreya-sans-latin-300italic.b0e07ba6.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-300italic.46762122.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Alegreya Sans Regular "),local("Alegreya Sans-Regular"),url(/blog/static/alegreya-sans-latin-400.3de041e5.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-400.ed12fcac.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Alegreya Sans Regular italic"),local("Alegreya Sans-Regularitalic"),url(/blog/static/alegreya-sans-latin-400italic.9465a336.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-400italic.8110b97c.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:500;src:local("Alegreya Sans Medium "),local("Alegreya Sans-Medium"),url(/blog/static/alegreya-sans-latin-500.15ddffe3.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-500.74a11342.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:500;src:local("Alegreya Sans Medium italic"),local("Alegreya Sans-Mediumitalic"),url(/blog/static/alegreya-sans-latin-500italic.b5ec9dc5.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-500italic.07c42835.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Alegreya Sans Bold "),local("Alegreya Sans-Bold"),url(/blog/static/alegreya-sans-latin-700.4b0948f6.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-700.2e56513c.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Alegreya Sans Bold italic"),local("Alegreya Sans-Bolditalic"),url(/blog/static/alegreya-sans-latin-700italic.4ed409f7.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-700italic.3f6cbbb0.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Alegreya Sans ExtraBold "),local("Alegreya Sans-ExtraBold"),url(/blog/static/alegreya-sans-latin-800.1c0e5aae.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-800.90d95c03.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Alegreya Sans ExtraBold italic"),local("Alegreya Sans-ExtraBolditalic"),url(/blog/static/alegreya-sans-latin-800italic.e8aae4da.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-800italic.ebc3fa33.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:normal;font-display:swap;font-weight:900;src:local("Alegreya Sans Black "),local("Alegreya Sans-Black"),url(/blog/static/alegreya-sans-latin-900.23dc5a13.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-900.f0423f38.woff) format("woff")}@font-face{font-family:Alegreya Sans;font-style:italic;font-display:swap;font-weight:900;src:local("Alegreya Sans Black italic"),local("Alegreya Sans-Blackitalic"),url(/blog/static/alegreya-sans-latin-900italic.e77626c6.woff2) format("woff2"),url(/blog/static/alegreya-sans-latin-900italic.58324fe2.woff) format("woff")}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers{padding-left:0}pre[class*=language-].line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}</style></head><body><div id="___gatsby"><div style="padding:2.1rem 1.05rem;max-width:30.8rem;margin:0 auto;" data-reactroot="" data-reactid="1" data-react-checksum="149809617"><!-- react-empty: 2 --><div data-reactid="3"><a style="text-decoration:none;box-shadow:none;color:inherit;" href="/blog/" data-reactid="4"><h3 style="margin-top:0;" data-reactid="5">Daemons</h3></a></div><div data-reactid="6"><!-- react-empty: 7 --><h1 data-reactid="8">Investigating tries - Writing a spell-checking algorithm</h1><div data-reactid="9"><p>This article walks through writing a spell-checking algorithm, making use of a neat data structure called a <a href="https://en.wikipedia.org/wiki/Trie">trie</a>, which is particularly suited to the problem.</p>
<p>We will look at:</p>
<ul>
<li>The spell-checking problem and naive solutions</li>
<li>What a trie is and how it can offer us a better solution</li>
<li>The trie-based solution</li>
<li>Analysis of our solution</li>
<li>How our solution can be improved</li>
<li>Other problems that can be solved with tries</li>
</ul>
<h2>Problem</h2>
<p>We wish to write a spell-checking algorithm which should return a boolean indicating whether the word might be valid or not. It should return false only if there is no possibility of the word being correct. Words which are incorrect but may be made correct with the addition of further letters should return true.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">zebr -> true
zebra -> true
zebrak -> false</code></pre>
      </div>
<p>Let’s consider some solutions using conventional data structures.</p>
<p><strong>List.</strong> Sort words and store them in a <code>list</code>. We can then use a modified binary search ^<em>1</em> to search for words in <code>O(m log n)</code> time ^<em>2</em>, where m is the length of the search term and n is the number of words in the dictionary. This isn’t a bad solution, but we can do better.</p>
<p><strong>Dict/set.</strong> Store words in a <code>dict</code> or a <code>set</code>. Dicts and sets use hashing algorithms to provide constant time (<code>O(1)</code>) lookups. This makes them seem suitable for an algorithm which is mostly about looking up whether a word is in a list. However, our spell-checker should not return false for the word the user is currently typing, even if it is not yet a valid word. In hashing the words in the list, we lose information about the word itself, and cannot map a word which can be made correct to the correct word. This makes dicts and sets unsuitable for this purpose.</p>
<h2>Tries</h2>
<p>A trie is a data structure which can store strings in a way which makes them easy to search. The following diagram shows a trie with the strings app, apple and cat stored in it.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">0 -> a -> p -> p. -> l -> e.
 `-> c -> a -> t.</code></pre>
      </div>
<p>In this diagram, <code>0</code> represents the node at the top of the trie, which has no value associated. Nodes marked are marked with a dot <code>.</code> to signify that they contain a letter which is at the end of a word.</p>
<p>The trie is made up of a series of interconnected nodes. Each node stores a single character, and interconnecting lines show the relationship between characters. By following the lines, we can see our three words</p>
<p>We can see that a trie explicitly encodes the characters of a word in its nodes, making it suitable for our spell-checking algorithm, where we need to be able to match substrings of words in the dictionary.</p>
<p>Our trie will need to support two operations:</p>
<ul>
<li><strong><code>insert</code></strong>, which adds a new word</li>
<li><strong><code>search</code></strong>, which searches for a match or potential match</li>
</ul>
<h2>Implementation</h2>
<p>First, let’s implement our trie. Tries consist of a series of nodes. Each node must store a value, a record of the child nodes, and whether the node points to the end of a complete word.</p>
<p>The child nodes can be stored in different ways, depending on the properties desired in the trie. Here, we store them in a dict, which offers fast <code>O(1)</code> lookup times, but require larger memory usage. A list could alternatively be used to reduce memory usage, at the cost of slower lookup time.</p>
<p>Using a <code>dict</code>, the algorithmic complexity of spell-checking a word should be <code>O(m)</code>, where <code>m</code> is the length of the string being checked ^<em>3</em>.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">class Node(object):
   def __init__(self, value=None):
        self.value = value
        self.children = {}
        self.is_complete = False</code></pre>
      </div>
<p>The trie itself just contains a reference to the top of the string of nodes:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">class Trie(object):
    def __init__(self):
        self.node = Node()</code></pre>
      </div>
<p>We can now implement the <code>insert</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">class Trie(object):
    # ...
    def insert(self, key):
        node = self.node
        for letter in key:
            if letter in node.children:
                node = node.children[letter]
            else:
                new_node = Node(letter)
                node.children[letter] = new_node
                node = new_node
        node.is_complete = True</code></pre>
      </div>
<p>Insert takes a key to insert, iterates over it, and adds each letter to the trie, creating new nodes if necessary.</p>
<p><code>search</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">class Trie(object):
    # ...
    def search(self, key):
        node = self.node
        for letter in key:
            if letter not in node.children:
                return False
            else:
                node = node.children[letter]
        return True</code></pre>
      </div>
<p>Search iterates over the letters in the key, checking that each node contains a child whose value matches the letter.</p>
<h2>Analysis</h2>
<h3>Comparison to binary search</h3>
<p>We can compare how our trie-based algorithm compares to binary search which by running a benchmark test. The test searches for 1000 randomly selected words from the dictionary 100 times each.</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">$ python benchmark.py
Binary search 1000 items 100 times: 2.32307600975
Trie search 1000 items 100 times: 0.461572885513</code></pre>
      </div>
<h3>Complexity</h3>
<p>We can empirically measure the algorithm’s time complexity by measuring the time taken to search for words of variable length known to be in the trie.</p>
<p><img src="https://raw.githubusercontent.com/naqushab/static-assets/master/image/trie-search-complexity.png" alt="Trie Search Complexity"></p>
<p>Graph showing trie’s search has linear time complexity.</p>
<p><code>Trie.search</code> has linear time complexity, as expected.</p>
<h2>Improvements</h2>
<h3>Speed up searching successive characters in a word</h3>
<p>When spell-checking, a word as it is typed, we make multiple calls to the <code>search()</code> function, each time passing the previously searched value with a new character appended. For example, when typing the word ‘word’, the following searches are made:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">w
wo
wor
word</code></pre>
      </div>
<p>When searching for ‘wor’, you repeat the work done when searching for ‘wo’ and ‘w’. We can modify our algorithm to take this into account:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">class Trie(object):
    # ...
    def search(self, key, prev_node=None):
        node = prev_node if prev_node is not None else self.node
        for letter in key:
            if letter not in node.children:
                return False, node
            else:
                node = node.children[letter]
        return True, node</code></pre>
      </div>
<p>In this code, the last searched node is returned to the caller. The caller can then supply this node when calling search with the next character in the word to continue searching when we left off.</p>
<h3>Startup time</h3>
<p>One disadvantage of this algorithm is that initialising the trie takes some time. By profiling the insertion of the dictionary into the trie, we can see that a lot of this time is spent initialising <code>Node</code> objects:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">$ python profile_trie_insert.py
     1028667 function calls in 5.354 seconds

Ordered by: standard name

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.176    0.176    5.354    5.354 <string>:1(<module>)
     1    0.101    0.101    5.178    5.178 profile_trie_insert.py:6(initialise_trie)
792777    3.273    0.000    3.273    0.000 trie_dict.py:12(__init__)
     1    0.000    0.000    0.000    0.000 trie_dict.py:20(__init__)
235886    1.804    0.000    5.077    0.000 trie_dict.py:29(insert)
     1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}</code></pre>
      </div>
<p>This startup time could be improved by implementing Node with an object with one which is faster to initialise, such as a <code>collections.namedtuple</code>.</p>
<p>However, this slow startup only needs to be run once, and won’t affect performance once initialised.</p>
<h3>Memory usage</h3>
<p>Tries trade off speed for memory usage. Although storing a list of words in a trie reduces the total number of characters stored ^<em>4</em>, each character stored now has overhead associated with it from the Node object which contains it, and the dict used to store its relationships.</p>
<p>This memory usage can be reduced by storing the words in a <a href="https://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton">deterministic acyclic finite state automaton</a>, which prunes some of the redundancy out of the trie.</p>
<h2>Extensions</h2>
<p>Tries can be used in similar ways to implement:</p>
<ul>
<li>An autocomplete algorithm</li>
<li>A sort function (insert all keys into the trie, use a depth-first-search-esque algorithm to output the keys in order)</li>
</ul>
<hr>
<ol>
<li>
<p>Perform binary search, but instead of searching for the string in the dictionary which == the search term, search for a string which startswith() the search term. </p>
</li>
<li>
<p>We are not just searching for a word in a dictionary, but also for words which could have letters added them to make them valid. We can do this by checking whether the dictionary entry starts with the letters of the search term O(m) at each step of the search O(log n) </p>
</li>
<li>
<p>At each step of the seach, we do a dict key lookup, which is O(1). For a word with m characters, we perform m of these lookups, giving an overall search complexity of O(m). </p>
</li>
<li>
<p>Storing the words ‘cat’ and ‘cab’ in a list requires storing six characters. In a trie, we only store four:</p>
</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-none"><code class="language-none">c -> a -> t
      `-> b</code></pre>
      </div></div><em style="font-size:0.87055rem;line-height:1.4rem;display:block;margin-bottom:1.4rem;" data-reactid="10"><!-- react-text: 11 -->Tagged with <!-- /react-text --><span data-reactid="12"><a href="/blog/tags/data-structures/" data-reactid="13">Data Structures</a><span data-reactid="14"> | </span></span><span data-reactid="15"><a href="/blog/tags/trie/" data-reactid="16">Trie</a></span></em><p style="font-size:0.87055rem;line-height:1.4rem;display:block;margin-bottom:1.4rem;" data-reactid="17"><!-- react-text: 18 -->Posted <!-- /react-text --><!-- react-text: 19 -->August 24, 2017<!-- /react-text --></p><hr style="margin-bottom:1.4rem;" data-reactid="20"/><!-- react-empty: 21 --><p style="margin-bottom:0;" data-reactid="22"><img src="/blog/static/naqushab.7bf6cdfd.jpg" style="border-radius:100%;float:left;margin-right:0.35rem;margin-bottom:0;width:2.8rem;height:2.8rem;" data-reactid="23"/><strong data-reactid="24">Naqushab Neyazee</strong><!-- react-text: 25 --> is Senior Software Engineer at Adobe and is fond of dabbling with new technologies.<!-- /react-text --><!-- react-text: 26 --> <!-- /react-text --><a href="https://twitter.com/naqushab" data-reactid="27">You can follow him on Twitter</a></p></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-a58e68831cb2c2feb1e0.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","107818501498521":"component---src-templates-blog-post-js-89bb5a4bad2639e9770d.js","77653406118394":"component---src-templates-tag-page-js-1a69174989d4259991b2.js","162898551421021":"component---src-pages-404-js-0e19ea7873fcecc0a8e6.js","35783957827783":"component---src-pages-index-js-992b27f6bc127a2f3a48.js","195850678278728":"component---src-pages-tags-js-7dd52250c8f07745c3a9.js","60335399758886":"path----557518bd178906f8d58a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","69145932705660":"path---trie-dictionary-spellcheck-f4883cfb425e8292b0de.js","101975605849084":"path---designing-web-crawler-python-44017baaa1d3eeb9bfe4.js","231018187067477":"path---hashmap-implementation-in-c-32927d171695b6fcbb4a.js","2316851250784":"path---string-searching-kmp-3575860f4165b8748191.js","10244422702148":"path---ternary-search-101-3b594fcd3fd3643ddf0b.js","94521927528854":"path---producer-consumer-problem-b983c8a8e6b24e57d423.js","32133537283428":"path---read-it-later-flask-python-b3b0b730e1c84c8f4d4c.js","143636244201540":"path---greedy-vs-dynamic-programming-adab4b9ddd07660d29e6.js","78289174550869":"path---system-design-overview-018d0e5f6f55b9749b50.js","162874634297551":"path---tags-data-structures-051599a9f1fb19032738.js","44596054845757":"path---tags-trie-90c76bbea9a72ce89603.js","65951750749414":"path---tags-design-7ec806c23d99c953db27.js","38699965319050":"path---tags-web-crawler-04b56649263872b95cf7.js","7538477671963":"path---tags-python-f4f4ebfe715a7f8ca8d3.js","99965129943657":"path---tags-c-1e425862033880bbc612.js","159304943229617":"path---tags-hash-map-b0f953885d322cd69b78.js","11743349734324":"path---tags-kmp-83ae4cde253dbae328b4.js","120440209855454":"path---tags-string-fab0a97c9d60ffbf377f.js","27451989507627":"path---tags-searching-be6e187295a0818fc8c3.js","44727209576107":"path---tags-algorithm-948040e1057171ae24cc.js","94738983780980":"path---tags-producer-consumer-2f7de3ac2af36eb6c61b.js","212499019225397":"path---tags-multi-threading-eff49fd2220822d6d2bc.js","74044735890678":"path---tags-newspaper-818c0597a5eff9184d10.js","168269638805844":"path---tags-read-it-later-4f804814d24b618bc5d5.js","111067841283694":"path---tags-greedy-solution-6567c595a6053e868189.js","100009293837733":"path---tags-dynamic-programming-f363feed802a6cccd11f.js","114677301390673":"path---tags-system-design-869b3ec409869b9a9734.js","61904248049707":"path---tags-overview-73e03fc773ad551b82cf.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-537f346a857de84bea4b.js","55702396619907":"path---tags-14f7dc8dae94dbcc6c92.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-29cb5c44085daafa2b8e.js"}/*]]>*/</script><script>
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-105356281-1', 'auto');
      }
      </script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/blog/commons-2c1f772de09748d79929.js","/blog/app-a58e68831cb2c2feb1e0.js","/blog/path---trie-dictionary-spellcheck-f4883cfb425e8292b0de.js","/blog/component---src-templates-blog-post-js-89bb5a4bad2639e9770d.js","/blog/component---src-layouts-index-js-29cb5c44085daafa2b8e.js"])/*]]>*/</script></body></html>